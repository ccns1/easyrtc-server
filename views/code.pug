extend layout

block content
    each widgetSection in ourRooms
        div.columns
            div.column
                section.section
                    div.container
                        div.heading
                            h1.title #{widgetSection.label}
                            h2.subtitle Для использования виджета на сайте, скопируйте его код и разместиет на странице, где он должен располагаться.
                        h4.title.is-4 Блок &ltstyle&gt
                        div.box
                            code .widget-videochat { position: fixed; bottom: 200px; right: 5px; width: 60px; height: 60px; display: block; z-index: 100; cursor: pointer; background: #fac901; line-height: 39px; border-radius: 6px; background-image: url('http://s1.iconbird.com/ico/2014/1/622/w512h5121390854463phone512.png'); background-repeat: no-repeat; background-position: center; background-size: 85% 85%; } #widget-modal { color: #ffffff; opacity: 0.6; background: #212121; position: fixed; z-index: 999; width:100%; height: 100%; padding: 15px; margin-top: -10px; margin-left: -10px; } .widget-hidden { display: none;	} #iframeContainer { position: fixed; width: 90%; opacity: 1; margin-top: 5%; margin-left: 5%; height: 85%; z-index: 9999; } .widget-iframe { width: 100%; height: 95%;} .close-button { margin-top: 15px; color: #fab901; background: #fab901; color: black; padding: 10px; text-transform: uppercase; text-decoration: none; font-weight: bold; font-size: small; border-radius: 5px; }
                        h3.title.is-4 Блок &ltscrpit&gt
                        div.box
                            code function checkMyBrowser() { let userInformation = { userBrowser: detection().browserName(), deviceType: detection().deviceType(), version: detection().versionBrowser(), webrtc: !!(navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia) };if(userInformation.deviceType === 'desktop') { if (detection().notSupported.indexOf(userInformation) === -1) { if(detection().legacyBrowser.indexOf(userInformation.userBrowser) === -1) { if(userInformation.userBrowser === 'GoogleChrome' && Number(userInformation.browserVersion) < 17 || userInformation.userBrowser === 'Firefox' && Number(userInformation.browserVersion) < 18 || userInformation.userBrowser === 'NewOpera' && Number(userInformation.browserVersion) < 18) { document.getElementById('widget-videchat-widget').classList.add('widget-hidden'); } else { if(userInformation.userBrowser === 'Firefox') { if(userInformation.webrtc === true) { detection().availableWebCamera().then((rc) => { if(rc === true ){ detection().avaliableMicrophone().then((rm) => { if(rm === true) { let iframe = document.createElement('iframe'); iframe.src = 'https://77.244.224.70:8080/widget/#{widgetSection.name}?need_check=not'; iframe.className = iframe.className.concat('widget-iframe'); document.getElementById('iframeContainer').appendChild(iframe); } else { document.getElementById('widget-videchat-widget').classList.add('widget-hidden'); } }); } else { document.getElementById('widget-videchat-widget').classList.add('widget-hidden'); } }); } else { document.getElementById('widget-videchat-widget').classList.add('widget-hidden'); } } else { document.getElementById('widget-videchat-widget').classList.add('widget-hidden'); document.getElementById('widget-videochat-window').classList.remove('widget-hidden'); } } } else { document.getElementById('widget-videchat-widget').classList.add('widget-hidden'); } } else { document.getElementById('widget-videchat-widget').classList.add('widget-hidden'); }  } else{ document.getElementById('widget-videchat-widget').classList.add('widget-hidden'); } } function detection() { return { ua: navigator.userAgent, deviceType: function () { if (this.ua.match(/iPhone/) || this.ua.match(/BlackBerry/) || this.ua.match(/(Windows Phone OS|Windows CE|Windows Mobile)/) || this.ua.match(/Mobile/) || this.ua.match(/(Opera Mini|IEMobile|SonyEricsson|smartphone)/)) { return 'mobile'; } else if(this.ua.match(/iPod/) || this.ua.match(/iPad/) || this.ua.match(/PlayBook/) || this.ua.match(/(GT-P1000|SGH-T849|SHW-M180S)/) || this.ua.match(/Tablet PC/) || this.ua.match(/(PalmOS|PalmSource| Pre\/)/) || this.ua.match(/(Kindle)/)) { return 'tablet'; } else { return 'desktop'; } }, availableWebCamera: function() { return new Promise((resolve) => { navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia; navigator.getUserMedia({video:true}, function(stream) { resolve(true); }, function(error) { resolve(false) }); }); }, avaliableMicrophone: function() { return new Promise((resolve) => { navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia; navigator.getUserMedia({audio: true}, function(stream) { resolve(true); }, function(error) { resolve(false); }); }); }, browserName: function() { if(this.ua.search(/MSIE/) > -1) return 'InternetExplorer'; if(this.ua.search(/Trident/) > -1) return 'InternetExplorer(Trident)'; if(this.ua.search(/OPR/) >-1) return 'NewOpera'; if(this.ua.search(/YaBrowser/) > -1 ) return 'YandexBrowser'; if(this.ua.search(/UBrowser/) > -1) return 'UCBrowser'; if(this.ua.search(/SeaMonkey/) > -1) return 'SeaMonkey'; if(this.ua.search(/Iceweasel/) > -1) return 'IceWeasel'; if(this.ua.search(/Opera/) > -1) return 'OldOpera'; if(this.ua.search(/Firefox/) > -1) return 'Firefox'; if(this.ua.search(/Vivaldi/) > -1) return 'Vivaldi'; if(this.ua.search(/Edge/) > -1) return 'Edge'; if(this.ua.search(/Safari/) > -1 && navigator.vendor.indexOf('Apple') >-1 && this.ua && this.ua.match('CriOS')) return 'Safari'; if(this.ua.search(/Konqueror/) > -1) return 'Konqueror'; if(this.ua.search(/Chrome/) > -1 ) return 'GoogleChrome'; return 'UnknownBrowser'; }, legacyBrowser: [ 'InternetExplorer', 'Konqueror', 'SeaMonkey', 'OldOpera', 'InternetExplorer(Trident)' ], notSupported: [ 'Safari', 'Edge' ], versionBrowser: function() { if(this.deviceType() === 'desktop') { switch(this.browserName()) { case 'InternetExplorer(Trident)': return (this.ua.split('Trident/')[1]).split(';')[0]; case 'InternetExplorer': return (this.ua.split('MSIE ')[1]).split(';')[0]; case 'Firefox': return this.ua.split('Firefox/')[1]; case 'NewOpera': return this.ua.split('OPR/')[1]; case 'OldOpera': return this.ua.split('Version/')[1]; case 'GoogleChrome': return (this.ua.split('Chrome/')[1]).split(' ')[0]; case "Safari": return (this.ua.split('Version/')[1]).split(' ')[0]; case "Konqueror": return (this.ua.split('KHTML/')[1]).split(' ')[0]; case "IceWeasel": return (this.ua.split('Iceweasel/')[1]).split(' ')[0]; case "SeaMonkey": return this.ua.split('SeaMonkey/')[1]; case 'YaBrowser': return (this.ua.split('YaBrowser/')[1]).split(' ')[0]; case 'UCBrowser': return (this.ua.split('UBrowser/')[1]).split(' ')[0]; case 'Vivaldi': return this.ua.split('Vivaldi/')[1]; case 'UnknownBrowser': return 'UnknownVersion'; } } } }; } document.addEventListener('DOMContentLoaded', checkMyBrowser, false); function openWidget(){ document.getElementById('widget-modal').classList.remove('widget-hidden'); document.getElementById('iframeContainer').classList.remove('widget-hidden'); document.getElementById('modal-colse-btn').classList.remove('widget-hidden'); } function closeWidget(){ document.getElementById('widget-modal').classList.add('widget-hidden'); document.getElementById('iframeContainer').classList.add('widget-hidden'); document.getElementById('modal-colse-btn').classList.add('widget-hidden'); } function openChldWindow() { window.open('https://77.244.221.40:8080/widget/#{widgetSection.name}', '', 'width=800, height=600') }
                        h3.title.is-4 Блон HTML
                        div.box
                            code &ltdiv id='widget-modal' class="widget-hidden"&gt &lt/div&gt &ltdiv id="modal-colse-btn" class="widget-hidden"&gt &lta href='#!' class='close-button' onclick='closeWidget();'&gtЗакрыть окно&lt/a&gt &lt/div&gt &ltdiv id="iframeContainer" class="widget-hidden"&gt &lt/div&gt &ltdiv id='widget-videchat-widget' class='widget-videochat' onclick='openWidget();'&gt &lt/div&gt&ltdiv id='widget-videochat-window' class='widget-videochat widget-hidden' onclick='openChldWindow();'&gt &lt/div&gt